<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adventure Game</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: black;
    }
    canvas {
        display: block;
    }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.addEventListener("resize", () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

// Map size = same as screen
const mapWidth = canvas.width;
const mapHeight = canvas.height;

// Player setup
const player = {
    x: mapWidth / 2,
    y: mapHeight / 2,
    width: 32,
    height: 48,
    speed: 3,
    frameX: 0,
    frameY: 0,
    moving: false
};

// Sprite sheet (simple 8-bit style, green outfit)
const playerSprite = new Image();
playerSprite.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAwCAYAAAD0MWnXAAAACXBIWXMAAAsSAAALEgHS3X78AAABiElEQVR4nO2ZTUoDQRBGX0iRhQwQZlwA2wgDkMAsY7MAoCGcNQgkYjN4BsUwEQyDFDYH2MZx2P6HRk5XQkbj7vO/09mGJfFobHTReFTCNQjROA3MJ8t+cwYhGXLQi48PnwHq0GlEldFvOYzChjzNMIxAiOewChh6ozJ7A1CzjNh3jOAKnM4B+RnCMoU04dYVKHypQpQGz3cMylfHRp4DAdAGmUg1y6CpxryByYpBrYxvgkxOkHtReKsxDWxTKNO4D4rOQnVZKVAxPSHsXJrTrHgVNUfctFGHZj9jNW6HbPimVwb/TAZdTaNfLpuBMgP9fi5JqFGXgP8YBclA/YRVSh1itCEpEAZdQlKKwKkUKpFAqRQKkUCpFAqRQKkUCpFAqRQKkUCpFAqRQKkUCpFArxF/MCHehUdNwAAAABJRU5ErkJggg==";

// Keyboard controls
const keys = {};
window.addEventListener("keydown", e => {
    keys[e.key] = true;
});
window.addEventListener("keyup", e => {
    keys[e.key] = false;
    player.moving = false;
});

// Flowers and trees
let decorations = [];
function generateDecorations() {
    decorations = [];
    for (let i = 0; i < 20; i++) {
        decorations.push({x: Math.random() * mapWidth, y: Math.random() * mapHeight, type: "tree"});
    }
    for (let i = 0; i < 30; i++) {
        decorations.push({x: Math.random() * mapWidth, y: Math.random() * mapHeight, type: "flower"});
    }
}
generateDecorations();

function drawDecorations() {
    decorations.forEach(d => {
        if (d.type === "tree") {
            ctx.fillStyle = "darkgreen";
            ctx.fillRect(d.x, d.y, 40, 60);
        } else if (d.type === "flower") {
            ctx.fillStyle = "pink";
            ctx.beginPath();
            ctx.arc(d.x, d.y, 4, 0, Math.PI * 2);
            ctx.fill();
        }
    });
}

function movePlayer() {
    player.moving = false;
    if (keys["w"] || keys["ArrowUp"]) {
        player.y -= player.speed;
        player.frameY = 3;
        player.moving = true;
    }
    if (keys["s"] || keys["ArrowDown"]) {
        player.y += player.speed;
        player.frameY = 0;
        player.moving = true;
    }
    if (keys["a"] || keys["ArrowLeft"]) {
        player.x -= player.speed;
        player.frameY = 1;
        player.moving = true;
    }
    if (keys["d"] || keys["ArrowRight"]) {
        player.x += player.speed;
        player.frameY = 2;
        player.moving = true;
    }
}

function handlePlayerFrame() {
    if (player.moving) {
        player.frameX++;
        if (player.frameX > 3) player.frameX = 0;
    } else {
        player.frameX = 0;
    }
}

function drawPlayer() {
    ctx.drawImage(
        playerSprite,
        player.frameX * player.width,
        player.frameY * player.height,
        player.width,
        player.height,
        player.x,
        player.y,
        player.width,
        player.height
    );
}

function gameLoop() {
    ctx.fillStyle = "#4CAF50"; // grass background
    ctx.fillRect(0, 0, mapWidth, mapHeight);

    drawDecorations();
    movePlayer();
    handlePlayerFrame();
    drawPlayer();

    requestAnimationFrame(gameLoop);
}

playerSprite.onload = () => {
    gameLoop();
};
</script>
</body>
</html>
